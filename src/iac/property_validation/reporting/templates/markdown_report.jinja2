# ğŸ“Š Property Validation Coverage Report

**Handler:** `{{ handler_name }}`
**Generated:** {{ timestamp.strftime('%Y-%m-%d %H:%M:%S') }}

---

## ğŸ“ˆ Summary

| Metric | Value |
|--------|-------|
| **Coverage** | {{ metrics.coverage_percentage|format_percentage }}% |
| **Quality Score** | {{ quality_score|format_percentage }}/100 |
| **Properties Covered** | {{ metrics.covered_properties }}/{{ metrics.total_properties }} |
| **Missing Properties** | {{ metrics.missing_properties }} |

## ğŸ¯ Status

{% if passes %}
âœ… **PASS** - Coverage meets threshold (â‰¥70%) and no critical gaps

{% else %}
âŒ **FAIL** - {% if metrics.coverage_percentage < pass_threshold %}Coverage below threshold{% endif %}{% if metrics.critical_gaps > 0 %}{% if metrics.coverage_percentage < pass_threshold %}, {% endif %}{{ metrics.critical_gaps }} critical gap(s) found{% endif %}

{% endif %}

## ğŸ” Gap Breakdown

| Criticality | Count |
|-------------|-------|
| ğŸ”´ Critical | **{{ metrics.critical_gaps }}** |
| ğŸŸ  High | **{{ metrics.high_priority_gaps }}** |
| ğŸŸ¡ Medium | {{ metrics.medium_priority_gaps }} |
| âšª Low | {{ metrics.low_priority_gaps }} |

---

{% if critical_gaps %}
## ğŸ”´ Critical Gaps (Blocks Deployment)

{% for gap in critical_gaps %}
### `{{ gap.property_name }}`

**Reason:** {{ gap.reason }}

{% if gap.suggested_value %}
**ğŸ’¡ Suggestion:** `{{ gap.suggested_value }}`
{% endif %}

{% endfor %}

---

{% endif %}

{% if high_gaps %}
## ğŸŸ  High Priority Gaps (Security/Compliance Risk)

{% for gap in high_gaps %}
### `{{ gap.property_name }}`

**Reason:** {{ gap.reason }}

{% if gap.suggested_value %}
**ğŸ’¡ Suggestion:** `{{ gap.suggested_value }}`
{% endif %}

{% endfor %}

---

{% endif %}

{% if metrics.coverage_percentage < pass_threshold or metrics.critical_gaps > 0 %}
## âœ… Recommendations

{% if metrics.critical_gaps > 0 %}
1. **Address Critical Gaps First** - These block deployment and must be resolved
{% endif %}
{% if metrics.high_priority_gaps > 0 %}
2. **Review High Priority Gaps** - Security and compliance properties should not be omitted
{% endif %}
{% if metrics.coverage_percentage < pass_threshold %}
3. **Improve Overall Coverage** - Target at least {{ pass_threshold|format_percentage }}% coverage
{% endif %}
4. **Review Suggested Values** - Use provided suggestions as starting points
5. **Update Handler Logic** - Ensure all critical properties are mapped from Azure resources

{% endif %}

---

{% if not metrics.gaps %}
## âœ¨ Excellent!

No gaps found. All required properties are present in the generated IaC.

{% endif %}

<details>
<summary>ğŸ“‹ Full Gap List ({{ metrics.gaps|length }} total)</summary>

{% for gap in metrics.gaps %}
- {{ gap.criticality|criticality_badge }} **{{ gap.property_name }}** ({{ gap.criticality.value }})
  - {{ gap.reason }}
  {% if gap.suggested_value %}- Suggested: `{{ gap.suggested_value }}`{% endif %}

{% endfor %}

</details>

---

*Generated by Property Validation System*
